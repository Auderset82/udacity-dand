# Developing Data Scientists: Exploring Free Code Camp's ["2016 New Coder Survey"](https://www.kaggle.com/freecodecamp/2016-new-coder-survey-)
#### By [David Venturi](http://davidventuri.com/)

```{r echo=FALSE, message=FALSE, warning=FALSE, packages}
# Load all of the packages that you end up using
# in your analysis in this code chunk.

# Notice that the parameter "echo" was set to FALSE for this code chunk.
# This prevents the code from displaying in the knitted HTML output.
# You should set echo=FALSE for all code chunks in your file.

library(ggplot2)
library(countrycode)
library(plyr)
library(dplyr)
library(ggthemes)
library(scales)
library(grid)
library(gridExtra)
library(extrafont)
library(extrafontdb)
library(tidyr)
library(stringr)
```

```{r echo=FALSE, Load_Clean_the_Data}
# Load the Data
setwd('~/Documents/CS/DAND/udacity-dand/p4')
fcc <- read.csv('2016-FCC-New-Coders-Survey-Data.csv')

# Create new continent variables and move them to their alphabetical position
fcc$ContinentCitizen <- countrycode(fcc$CountryCitizen, 'country.name', 'continent')
fcc$ContinentLive <- countrycode(fcc$CountryLive, 'country.name', 'continent')
fcc <- select(fcc, Age:CountryCitizen, ContinentCitizen, CountryLive, ContinentLive, EmploymentField:StudentDebtOwe)

# Clean the data

# 66 countries with no assigned continent via countrycode()
cit_live_cols <- select(fcc, CountryCitizen:ContinentLive)
problem_countries <- with(cit_live_cols, cit_live_cols[(!is.na(CountryCitizen) & is.na(ContinentCitizen)) | (!is.na(CountryLive) & is.na(ContinentLive)), ])

# Problem country/continent names
fix_cont <- c('Africa', 'Asia', 'Europe', 'Europe', 'Europe', 'Oceania')
names(fix_cont) <- c('Nambia', 'Taiwan', 'Canary Islands', 'Kosovo', 'Channel Islands', 'Hawaii')
# "Hawaii is generally included in Oceania, even though it is a part of the United States" http://cs.mcgill.ca/~rwest/wikispeedia/wpcd/wp/o/Oceania.htm

# Assign continents to problem countries
fcc$ContinentCitizen <- ifelse(fcc$CountryCitizen %in% names(fix_cont), fix_cont[as.character(fcc$CountryCitizen)], fcc$ContinentCitizen)
fcc$ContinentLive <- ifelse(fcc$CountryLive %in% names(fix_cont), fix_cont[as.character(fcc$CountryLive)], fcc$ContinentLive)

# South American countries in dataset
s_america <- c('Argentina', 'Bolivia', 'Brazil', 'Chile', 'Colombia', 'Ecuador', 'Guyana', 'Netherland Antilles', 'Paraguay', 'Peru', 'Uruguay', 'Venezuela')

# Separate Americas into North and South
make_s_america <- function(continent, country) {
  return(ifelse(continent == 'Americas' & country %in% s_america, 'South America', continent))
}

make_n_america <- function(continent, country) {
  return(ifelse(continent == 'Americas' & !(country %in% s_america), 'North America', continent))
}

fcc$ContinentCitizen <- make_s_america(fcc$ContinentCitizen, fcc$CountryCitizen)
fcc$ContinentCitizen <- make_n_america(fcc$ContinentCitizen, fcc$CountryCitizen)
fcc$ContinentLive <- make_s_america(fcc$ContinentLive, fcc$CountryLive)
fcc$ContinentLive <- make_n_america(fcc$ContinentLive, fcc$CountryLive)

# TEST CONTINENT VARS
# table(fcc$ContinentLive)
# table(fcc$ContinentCitizen)

# Make continents factor variables
fcc$ContinentCitizen <- factor(fcc$ContinentCitizen)
fcc$ContinentLive <- factor(fcc$ContinentLive)

# Fix Netherlands (Country...)
fcc$CountryCitizen <- ifelse(fcc$CountryCitizen == "Netherlands (Holland, Europe)", "Netherlands", as.character(fcc$CountryCitizen))
fcc$CountryLive <- ifelse(fcc$CountryLive == "Netherlands (Holland, Europe)", "Netherlands", as.character(fcc$CountryLive))
fcc$CountryCitizen <- factor(fcc$CountryCitizen)
fcc$CountryLive <- factor(fcc$CountryLive)

# Fix Math/Mathematics (SchoolMajor)
fcc$SchoolMajor <- ifelse(fcc$SchoolMajor == "Math", "Mathematics", as.character(fcc$SchoolMajor))
fcc$SchoolMajor <- factor(fcc$SchoolMajor)

# Change 0 to No, 1 to Yes for two plots
fcc$JobRelocateYesNo <- factor(fcc$JobRelocateYesNo)
fcc$JobRelocateYesNo <- revalue(fcc$JobRelocateYesNo, c("0"="No", "1"="Yes"))
fcc$IsEthnicMinority <- factor(fcc$IsEthnicMinority)
fcc$IsEthnicMinority <- revalue(fcc$IsEthnicMinority, c("0"="No", "1"="Yes"))

# Add two data science podcast columns
fcc$PodcastPartiallyDerivative <- with(fcc, ifelse(PodcastOther == "Partially Derivative" | PodcastOther == "http://www.partiallyderivative.com/", as.integer(1), NA))
fcc$PodcastBecomingDataSci <- with(fcc, ifelse(PodcastOther == "Becoming A Data Scientist" | PodcastOther == "Learning to be a Data Scientist", as.integer(1), NA))
fcc$PodcastTalkingMachines <- with(fcc, ifelse(PodcastOther == "Talking machines", as.integer(1), NA))
fcc <- select(fcc, Age:PodcastOther, PodcastPartiallyDerivative:PodcastTalkingMachines, PodcastProgrammingThrowDown:StudentDebtOwe)

# Change "NA" to "other" for EmploymentStatus if respondent provided EmploymentStatusOther
fcc$EmploymentStatus <- as.character(fcc$EmploymentStatus)
fcc$EmploymentStatus <- with(fcc, ifelse(is.na(EmploymentStatus) & !is.na(EmploymentStatusOther), 'Other', EmploymentStatus))
fcc$EmploymentStatus <- as.factor(fcc$EmploymentStatus)

# Change "NA" to "other" for EmploymentField if respondent provided EmploymentFieldOther
fcc$EmploymentField <- as.character(fcc$EmploymentField)
fcc$EmploymentField <- with(fcc, ifelse(is.na(EmploymentField) & !is.na(EmploymentFieldOther), 'other', EmploymentField))
fcc$EmploymentField <- as.factor(fcc$EmploymentField)
```

## Structure of Dataset
The original ["2016 New Coder Survey"](https://www.kaggle.com/freecodecamp/2016-new-coder-survey-) dataset consists of 113 variables. Most of these variables are answers to survey questions, though a few are computer-generated (e.g. respondent ID and survey start/end times). **Over 15,000 observations** (i.e. respondents) exist.

The [```str``` function](http://www.r-bloggers.com/str-implementation-for-data-frames/) output is long and messy, so I won't print it here. Please consult Free Code Camp's [list of survey questions and possible answers](https://github.com/FreeCodeCamp/2016-new-coder-survey/blob/master/survey-data-dictionary.md). Boolean, numeric, and categorical types are the majority.

## New Variables
I created five new variables from existing variables:

- *ContinentCitizen* and *ContinentLive* from *CountryCitizen* and *CountryLive* using Vincent Arel-Bundock's [countrycode](https://github.com/vincentarelbundock/countrycode) R package
- *PodcastPartiallyDerivative*, *PodcastBecomingDataSci*, and *PodcastTalkingMachines* from *PodcastOther* using [ifelse()](http://www.programiz.com/r-programming/ifelse-function) statements

These new variables bring our total to **118 variables**.

```{r echo=FALSE, Full_Dataset}
dim(fcc)
```

## Data Science/Engineering Subset
646 respondents answered "*Data Scientist/Data Engineer*" to the question: "*Which one of these roles are you most interested in?*"

```{r echo=FALSE, Data_Science_Dataset}
# "Which one of these roles are you most interested in?"
fcc_data <- with(fcc, fcc[JobRoleInterest == '  Data Scientist / Data Engineer' & !is.na(JobRoleInterest), ])
dim(fcc_data)
```

#### <span style="color:#377bb5">The following analysis explores the characteristics of these developing data scientists and engineers.</span>
Additional comments are included where the results significantly differ from the full new coder survey dataset.

## Univariate Plots Section
```{r echo=FALSE, Univariate_Plot_Functions}
# Order factor based on the survey's data science subset results (ascending)
order_factor <- function(fcc_data_var) {
  table(fcc_data_var)
  var_table <- table(fcc_data_var)
  var_levels <- names(var_table)[order(var_table)]
  return(factor(fcc_data_var, levels = var_levels))
}

# Text grob for plot title
plot_title <- function(question) {
  title.grob <- textGrob(
    label = question,
    x = unit(0.3, "lines"), 
    y = unit(-0.3, "lines"),
    hjust = 0, vjust = 0,
    gp = gpar(fontsize = 12, col="#454545"))
  return(title.grob)
}

# Pretty histogram
nice_histogram <- function(col, bw, xlab) {
  df <- as.data.frame(col)
  colnames(df)[1] <- "x"

  plot <- ggplot(aes(x), data = df) +
    geom_histogram(binwidth=bw, color = '#377bb5', fill = '#377bb5') +
    theme_minimal() +
    labs(title="", x=paste("\n",xlab), y="Count\n") +
    theme(axis.text=element_text(size=10, color="#454545"),
          axis.title=element_text(color="#454545"))
  return(plot)
}

# Pretty bar chart
nice_bar_plot <- function(col, question, num_answers, lab_size, lab_cut) {
  df <- as.data.frame(col)
  colnames(df)[1] <- "x"
  
  title.grob <- plot_title(question)
  
  dfTab <- as.data.frame(table(df))
  colnames(dfTab)[1] <- "x"
  
  dfTab$lab <- 100 * dfTab$Freq / num_answers
  dfTab$lab <- ifelse(dfTab$lab >= lab_cut, sprintf("%1.1f%%", dfTab$lab), "")
  dfTab$lab <- as.character(dfTab$lab)
  
  plot <- ggplot(df) +
    geom_bar(aes(x, alpha=factor(..count..)), fill="#377bb5") +
    theme_minimal() +
    scale_x_discrete(drop=FALSE) +
    labs(title="", x=NULL,
         y=paste(as.character(num_answers),
                 "out of 646 developing data scientists/engineers answered")) +
    theme(axis.text=element_text(size=10, color="#454545"),
          axis.title.x=element_text(colour="#377bb5", size=10,
                                    margin=margin(15,0,9,0)),
          axis.title.y=element_text(color="#454545"),
          legend.position="none") +
    geom_text(data=dfTab, aes(x=x,y=Freq,label=lab), hjust = 1,
              color="white", size=lab_size, fontface=2) +
    coord_flip()
  
  plot <- arrangeGrob(plot, top = title.grob)
  return(plot)
}

# Pretty scatter plot
nice_scatter <- function(xcol, ycol, xlab, ylab) {
  xdf <- as.data.frame(xcol)
  ydf <- as.data.frame(ycol)
  df <- merge(xdf, ydf, by=0)
  #df <- df[order(as.numeric(df$Row.names)),]
  
  colnames(df)[2] <- "x"
  colnames(df)[3] <- "y"
  
  df_na_rm <- with(df, df[!is.na(x) & !is.na(y), ])
  
  plot <- ggplot(aes(x=x, y=y), data=df_na_rm) +
  geom_jitter(alpha=0.75, color="#377bb5") +
  geom_smooth(method='lm', color="#FF4541") +
  theme_minimal() +
  labs(title="", x=paste("\n",xlab), y=paste(ylab,"\n")) +
  theme(axis.text=element_text(size=10, color="#454545"),
        axis.title=element_text(color="#454545"))
  return(plot)
}
```

### Who Participated
CodeNewbie and Free Code Camp designed the survey, and dozens of coding-related organizations publicized it to their members.

Of the 646 *developing data scientists and data engineers* who responded to the survey:

#### <span style="color:#377bb5">A quarter are women.</span>

```{r echo=FALSE, message=FALSE, Gender}
# Gender
table(fcc_data$Gender)['female'] / sum(table(fcc_data$Gender))
fcc_data$Gender <- order_factor(fcc_data$Gender)
gender_na_rm <- with(fcc_data, fcc_data[!is.na(Gender), ])
g_gender <- grid.arrange(nice_bar_plot(gender_na_rm$Gender, "What's your gender?", nrow(gender_na_rm), 11, 1))
# ggsave(file="Gender.png", g_gender)
```

#### <span style="color:#377bb5">Their median age is 26.</span>

```{r echo=FALSE, message=FALSE, Age}
# Age
summary(fcc_data$Age, na.rm = TRUE)
age.grob <- plot_title("How old are you?")
age_na_rm <- with(fcc_data, fcc_data[!is.na(Age), ])
g_age <- grid.arrange(nice_histogram(age_na_rm$Age, 1, "Age"), top = age.grob)
```

#### <span style="color:#377bb5">They started programming an average of 16 months ago.</span>

```{r echo=FALSE, message=FALSE, MonthsProgramming}
# MonthsProgramming
summary(fcc_data$MonthsProgramming, na.rm = TRUE)
months_prog.grob <- plot_title("About how many [years] have you been programming for?")
months_prog_na_rm <- with(fcc_data, fcc_data[!is.na(MonthsProgramming), ])
g_months_prog <- grid.arrange(nice_histogram(months_prog_na_rm$MonthsProgramming/12, 0.5, "Years Programming"), top = months_prog.grob)
# ggsave(file="MonthsProgramming.png", g_months_prog)
```

Logarithmically transforming the long tail data to better understand the distribution, programming experience peaks around one year.

```{r echo=FALSE, message=FALSE, MonthsProgrammingLog10}
# Add 3/5 of a month to ease log10(0)=-inf issue
g_months_prog_log10 <- grid.arrange(nice_histogram((months_prog_na_rm$MonthsProgramming+0.6)/12, 0.25, "Years Programming") + scale_x_log10(breaks=c(0.1,0.5,1,2.5,5,10,25,50)), top = months_prog.grob)
# ggsave(file="MonthsProgrammingLog10.png", g_months_prog_log10)
```

### Learner Goals and Approaches
#### <span style="color:#377bb5">The average respondent dedicates 14 hours per week to learning.</span>

```{r echo=FALSE, message=FALSE, HoursLearning}
# HoursLearning
summary(fcc_data$HoursLearning, na.rm = TRUE)
hours_learn.grob <- plot_title("About how many hours do you spend learning each week?")
hours_learn_na_rm <- with(fcc_data, fcc_data[!is.na(HoursLearning), ])
g_hours_learn <- grid.arrange(nice_histogram(hours_learn_na_rm$HoursLearning, 5, "HoursLearning"), top = hours_learn.grob)
# ggsave(file="HoursLearning.png", g_hours_learn)
```


#### <span style="color:#377bb5">Nobody wants to freelance or start their own business.</span>
Compared to 40% for the full new coder survey, this is somewhat shocking.

```{r echo=FALSE, message=FALSE, JobPref}
# JobPref
fcc_data$JobPref <- order_factor(fcc_data$JobPref)
job_pref_na_rm <- with(fcc_data, fcc_data[!is.na(JobPref), ])
g_job_pref <- grid.arrange(nice_bar_plot(job_pref_na_rm$JobPref, "Would you prefer to...", nrow(job_pref_na_rm), 11, 0))
# ggsave(file="JobPref.png", g_job_pref)
```

#### <span style="color:#377bb5">52% percent are already applying for jobs, or will start applying within the next year.</span>

```{r echo=FALSE, message=FALSE, JobApplyWhen}
# JobApplyWhen
fcc_data$JobApplyWhen <- order_factor(fcc_data$JobApplyWhen)
job_apply_when_na_rm <- with(fcc_data, fcc_data[!is.na(JobApplyWhen), ])
g_job_apply_when <- grid.arrange(nice_bar_plot(job_apply_when_na_rm$JobApplyWhen, "When do you plan to start applying for jobs?", nrow(job_apply_when_na_rm), 11, 0))
# ggsave(file="JobApplyWhen.png", g_job_apply_when)
```

#### <span style="color:#377bb5">Most of them want to work in an office, as opposed to remotely.</span>

```{r echo=FALSE, message=FALSE, JobWherePref}
# JobWherePref
fcc_data$JobWherePref <- order_factor(fcc_data$JobWherePref)
job_where_pref_na_rm <- with(fcc_data, fcc_data[!is.na(JobWherePref), ])
g_job_where_pref <- grid.arrange(nice_bar_plot(job_where_pref_na_rm$JobWherePref, "Would you prefer to work...", nrow(job_where_pref_na_rm), 11, 0))
# ggsave(file="JobWherePref.png", g_job_where_pref)
```

#### <span style="color:#377bb5">And a majority are willing to relocate.</span>

```{r echo=FALSE, message=FALSE, JobRelocateYesNo}
# JobRelocateYesNo
fcc_data$JobRelocateYesNo <- order_factor(fcc_data$JobRelocateYesNo)
job_relo_na_rm <- with(fcc_data, fcc_data[!is.na(JobRelocateYesNo), ])
g_job_relo <- grid.arrange(nice_bar_plot(job_relo_na_rm$JobRelocateYesNo, "Are you willing to relocate for a job?", nrow(job_relo_na_rm), 12.3, 0))
# ggsave(file="JobRelocateYesNo.png", g_job_relo)
```

#### <span style="color:#377bb5">Most of them have not yet attended any in-person coding events.</span>

```{r echo=FALSE, message=FALSE, CodeEvent}
# LEARN TO USE LAZYEVAL TO MAKE A FUNCTION FOR THE NEXT THREE WRANGLING SEQUENCES (CodeEvent, Resource, Podcast) IN THE FUTURE

# CodeEvent
code_event_cols <- select(fcc_data, CodeEventBootcamp:CodeEventWorkshop)
code_event_cols$CodeEventOther <-
  ifelse(!is.na(code_event_cols$CodeEventOther),
         as.integer(1), NA)
code_event_cols$answered <-
  ifelse(rowSums(code_event_cols, na.rm = TRUE) != 0, 1, 0)
num_answers_code_event <- sum(code_event_cols[,'answered'])
code_event_sum <- code_event_cols %>% summarise_each(funs(sum(., na.rm=TRUE)))
code_event_sum_long <- gather(code_event_sum, event, num_yes, CodeEventBootcamp:CodeEventWorkshop) %>%
  arrange(desc(num_yes)) %>%
  mutate(event = str_sub(event, nchar("CodeEvent") + 1, -1))
code_event_factor <- as.data.frame(rep(code_event_sum_long$event,
                                       code_event_sum_long$num_yes))
colnames(code_event_factor) <- "event"
code_event_factor$event <- order_factor(code_event_factor$event)
code_event_factor_lim <- code_event_factor %>% group_by(event) %>% filter(n() > 2)
g_code_event <- grid.arrange(nice_bar_plot(droplevels(code_event_factor_lim$event), "Which types of in-person coding events have you attended?", num_answers_code_event, 5.7, 5))
# ggsave(file="CodeEvent.png", g_code_event)
```

#### <span style="color:#377bb5">On average, they use at least three different resources for learning.</span>

```{r echo=FALSE, message=FALSE, Resource}
# Resource
# length(resource_factor$resource) / dim(fcc_data)[1]
# 3.543344
resource_cols <- select(fcc_data, ResourceBlogs:ResourceYouTube)
resource_cols$ResourceOther <- ifelse(!is.na(resource_cols$ResourceOther), as.integer(1), NA)
resource_cols$answered <- ifelse(rowSums(resource_cols, na.rm = TRUE) != 0, 1, 0)
num_answers_resource <- sum(resource_cols[,'answered'])
resource_sum <- resource_cols %>% summarise_each(funs(sum(., na.rm=TRUE)))
resource_sum_long <- gather(resource_sum, resource, num_yes, ResourceBlogs:ResourceYouTube) %>%
  arrange(desc(num_yes)) %>%
  mutate(resource = str_sub(resource, nchar("Resource") + 1, -1))
resource_factor <- as.data.frame(rep(resource_sum_long$resource,
                                       resource_sum_long$num_yes))
colnames(resource_factor) <- "resource"
resource_factor$resource <- order_factor(resource_factor$resource)
resource_factor_lim <- resource_factor %>% group_by(resource) %>% filter(n() > 4)
g_resource <- grid.arrange(nice_bar_plot(droplevels(resource_factor_lim$resource), "Which learning resources have you found helpful?", num_answers_resource, 4.3, 5))
# ggsave(file="Resource.png", g_resource)
```

#### <span style="color:#377bb5">Less than 20% listen to coding-related podcasts.</span>
Of them, Partially Derivative, Becoming A Data Scientist, and Talking Machines are the only domain-specific podcasts noted.

```{r echo=FALSE, message=FALSE, Podcast}
# Podcast
podcast_cols <- select(fcc_data, PodcastChangeLog:PodcastWebAhead)
podcast_cols$PodcastOther <- ifelse(!is.na(podcast_cols$PodcastOther), as.integer(1), NA)
podcast_cols$answered <- ifelse(rowSums(podcast_cols, na.rm = TRUE) != 0, 1, 0)
num_answers_podcast <- sum(podcast_cols[,'answered'])
podcast_sum <- podcast_cols %>% summarise_each(funs(sum(., na.rm=TRUE)))
podcast_sum_long <- gather(podcast_sum, podcast, num_yes, PodcastChangeLog:PodcastWebAhead) %>%
  arrange(desc(num_yes)) %>%
  mutate(podcast = str_sub(podcast, nchar("Podcast") + 1, -1))
podcast_factor <- as.data.frame(rep(podcast_sum_long$podcast,
                                       podcast_sum_long$num_yes))
colnames(podcast_factor) <- "podcast"
podcast_factor$podcast <- order_factor(podcast_factor$podcast)
g_podcast <- grid.arrange(nice_bar_plot(podcast_factor$podcast, "Which coding-related podcasts have you found helpful?", num_answers_podcast, 4.3, 7))
# ggsave(file="podcast.png", g_podcast)
```

#### <span style="color:#377bb5">Only 11 of the 954 respondents that attended a bootcamp in the full survey are pursuing data science/engineering.</span>

```{r echo=FALSE, message=FALSE, Bootcamp}
# Bootcamp
fcc_data$BootcampName <- order_factor(fcc_data$BootcampName)
bootcamp_name_na_rm <- with(fcc_data, fcc_data[!is.na(BootcampName), ])
g_bootcamp_name <- grid.arrange(nice_bar_plot(droplevels(bootcamp_name_na_rm$BootcampName), "If you have attended a full-time coding bootcamp, which one?", nrow(bootcamp_name_na_rm), 6, 0))
# ggsave(file="BootcampName.png", g_bootcamp_name)
```

### Demographics and Socioeconomics
#### <span style="color:#377bb5">Data-focused respondents represent 166 countries.</span>

```{r echo=FALSE, message=FALSE, Country}
# CountryCitizen
# length(names(table(fcc_data$CountryCitizen)))
# 166
fcc_data$CountryCitizen <- order_factor(fcc_data$CountryCitizen)
country_citizen_na_rm <- with(fcc_data, fcc_data[!is.na(CountryCitizen), ])
country_citizen_na_rm_lim <- country_citizen_na_rm %>% group_by(CountryCitizen) %>% filter(n() > 4)
g_country_citizen <- grid.arrange(nice_bar_plot(droplevels(country_citizen_na_rm_lim$CountryCitizen), "Which country are you a citizen of?", nrow(country_citizen_na_rm), 3.2, 3))
# ggsave(file="CountryCitizen.png", g_country_citizen)

# CountryLive
# fcc_data$CountryLive <- order_factor(fcc_data$CountryLive)
# country_live_na_rm <- with(fcc_data, fcc_data[!is.na(CountryLive), ])
# country_live_na_rm_lim <- country_live_na_rm %>% group_by(CountryLive) %>% filter(n() > 4)
# g_country_live <- grid.arrange(nice_bar_plot(droplevels(country_live_na_rm_lim$CountryLive), "Which country do you currently live in?", nrow(country_live_na_rm), 2.5, 3))
# ggsave(file="CountryLive.png", g_country_live)
```

#### <span style="color:#377bb5">More than 90% are from North America, Europe, and Asia.</span>

```{r echo=FALSE, message=FALSE, Continent}
# ContinentCitizen
fcc_data$ContinentCitizen <- order_factor(fcc_data$ContinentCitizen)
continent_citizen_na_rm <- with(fcc_data, fcc_data[!is.na(ContinentCitizen), ])
g_continent_citizen <- grid.arrange(nice_bar_plot(droplevels(continent_citizen_na_rm$ContinentCitizen), "Which continent are you a citizen of?", nrow(continent_citizen_na_rm), 9, 4))
# ggsave(file="ContinentCitizen.png", g_continent_citizen)
```

#### <span style="color:#377bb5">Their cities span a wide range of urbanization levels.</span>

```{r echo=FALSE, message=FALSE, CityPopulation}
# CityPopulation
fcc_data$CityPopulation <- order_factor(fcc_data$CityPopulation)
city_pop_na_rm <- with(fcc_data, fcc_data[!is.na(CityPopulation), ])
g_city_pop <- grid.arrange(nice_bar_plot(city_pop_na_rm$CityPopulation, "About how many people live in your city?", nrow(city_pop_na_rm), 11, 0))
# ggsave(file="CityPopulation.png", g_city_pop)
```

#### <span style="color:#377bb5">Just under a quarter of respondents are ethnic minorities in their country.</span>

```{r echo=FALSE, message=FALSE, IsEthnicMinority}
# Ethnic Minority
fcc_data$IsEthnicMinority <- order_factor(fcc_data$IsEthnicMinority)
ethnic_minority_na_rm <- with(fcc_data, fcc_data[!is.na(IsEthnicMinority), ])
g_ethnic_minority <- grid.arrange(nice_bar_plot(ethnic_minority_na_rm$IsEthnicMinority, "Are you an ethnic minority in your country?", nrow(ethnic_minority_na_rm), 13, 0))
# ggsave(file="IsEthnicMinority.png", g_ethnic_minority)
```

#### <span style="color:#377bb5">And nearly half are non-native English speakers. They grew up speaking one of 148 languages.</span>

```{r echo=FALSE, message=FALSE, LanguageAtHome}
# LanguageAtHome
# length(names(table(fcc_data$LanguageAtHome)))
# 148
fcc_data$LanguageAtHome <- order_factor(fcc_data$LanguageAtHome)
language_na_rm <- with(fcc_data, fcc_data[!is.na(LanguageAtHome), ])
language_na_rm_lim <- language_na_rm %>% group_by(LanguageAtHome) %>% filter(n() > 5)
g_language <- grid.arrange(nice_bar_plot(droplevels(language_na_rm_lim$LanguageAtHome), "Which language do you speak at home with your family?", nrow(language_na_rm), 3.6, 3.6))
# ggsave(file="LanguageAtHome.png", g_language)
```

#### <span style="color:#377bb5">67% have earned at least a bachelor’s degree.</span>
Compared to 58% for the full new coder survey, the data-focused subset is more skewed towards graduate studies.

```{r echo=FALSE, message=FALSE, SchoolDegree}
# SchoolDegree
fcc_data$SchoolDegree <- order_factor(fcc_data$SchoolDegree)
school_degree_na_rm <- with(fcc_data, fcc_data[!is.na(SchoolDegree), ])
g_school_degree <- grid.arrange(nice_bar_plot(school_degree_na_rm$SchoolDegree, "What's the highest level of school you have completed?", nrow(school_degree_na_rm), 5.7, 5))
# ggsave(file="SchoolDegree.png", g_school_degree)
```

#### <span style="color:#377bb5">They studied 425 different majors. Computer Science and Mathematics were the two most popular majors, and an additional 16% studied some form of engineering.</span>
Diversity amongst majors is greater compared to the full survey, where Computer Science and Information Technology checked in at #1 and #2 with 17% and 5%, respectively.

```{r echo=FALSE, message=FALSE, SchoolMajor}
# SchoolMajor
# length(names(table(fcc_data$SchoolMajor)))
# 425
fcc_data$SchoolMajor <- order_factor(fcc_data$SchoolMajor)
school_major_na_rm <- with(fcc_data, fcc_data[!is.na(SchoolMajor), ])
school_major_na_rm_lim <- school_major_na_rm %>% group_by(SchoolMajor) %>% filter(n() > 5)
g_school_major <- grid.arrange(nice_bar_plot(droplevels(school_major_na_rm_lim$SchoolMajor), "What was the main subject your studied in university?", nrow(school_major_na_rm), 3, 0))
# ggsave(file="SchoolMajor.png", g_school_major)
```

#### <span style="color:#377bb5">Just over one half are currently working.</span>

```{r echo=FALSE, message=FALSE, EmploymentStatus}
# EmploymentStatus
fcc_data$EmploymentStatus <- order_factor(fcc_data$EmploymentStatus)
employment_status_na_rm <- with(fcc_data, fcc_data[!is.na(EmploymentStatus), ])
g_employment_status <- grid.arrange(nice_bar_plot(employment_status_na_rm$EmploymentStatus, "Regarding employment status, are you currently...", nrow(employment_status_na_rm), 5.7, 8))
# ggsave(file="EmploymentStatus.png", g_employment_status)
```

#### <span style="color:#377bb5">A quarter work in the tech industry.</span>
Employment fields are more spread compared to the full new coder survey, where 50% of respondents work in software development and IT.

```{r echo=FALSE, message=FALSE, EmploymentField}
# EmploymentField
fcc_data$EmploymentField <- order_factor(fcc_data$EmploymentField)
employment_field_na_rm <- with(fcc_data, fcc_data[!is.na(EmploymentField), ])
g_employment_field <- grid.arrange(nice_bar_plot(droplevels(employment_field_na_rm$EmploymentField), "Which field do you work in?", nrow(employment_field_na_rm), 4, 2))
# ggsave(file="EmploymentField.png", g_employment_field)
```

#### <span style="color:#377bb5">Median current salary is $44k.</span>

```{r echo=FALSE, message=FALSE, Income}
# Income
summary(fcc_data$Income, na.rm = TRUE)
income.grob <- plot_title("What is your current salary in USD?")
income_na_rm <- with(fcc_data, fcc_data[!is.na(Income), ])
g_income <- grid.arrange(nice_histogram(income_na_rm$Income, 10000, "Income"), top = income.grob)
# ggsave(file="Income.png", g_income)
```

#### <span style="color:#377bb5">And they expect to earn a median of $60k with their new data science/engineering skills.</span>
With data science/engineering being [notoriously lucrative](http://www.wired.com/insights/2015/03/data-scientists-earning-salaries/) in 2016, some respondents are likely seeking higher wages.

```{r echo=FALSE, message=FALSE, ExpectedEarning}
# ExpectedEarning
summary(fcc_data$ExpectedEarning, na.rm = TRUE)
exp_earn.grob <- plot_title("About how much do you expect to earn per year at your first new job (in USD)?")
exp_earn_na_rm <- with(fcc_data, fcc_data[!is.na(ExpectedEarning), ])
g_exp_earn <- grid.arrange(nice_histogram(exp_earn_na_rm$ExpectedEarning, 10000, "ExpectedEarning"), top = exp_earn.grob)
# ggsave(file="ExpectedEarning.png", g_exp_earn)
```

#### <span style="color:#377bb5">7% have served in their country’s military.</span>

```{r echo=FALSE, message=FALSE, HasServedInMilitary}
# HasServedInMilitary
has_served <- table(fcc_data$HasServedInMilitary)['1']
names(has_served) = c("has served in military")
has_served / nrow(fcc_data)
```

#### <span style="color:#377bb5">13% have children, and another 3% financially support an elderly or disabled relative. And one fifth of them are doing this without the help of a spouse.</span>

```{r echo=FALSE, message=FALSE, Home_Life}
# HasChildren
has_children <- table(fcc_data$HasChildren)['1']
names(has_children) = c("has children")
has_children / nrow(fcc_data)

# FinanciallySupporting
fin_supporting <- table(fcc_data$FinanciallySupporting)['1']
names(fin_supporting) = c("financially supporting")
fin_supporting / nrow(fcc_data)

# MaritalStatus
no_spouse <- (table(fcc_data$MaritalStatus)['widowed'] +
  table(fcc_data$MaritalStatus)['single, never married'] +
  table(fcc_data$MaritalStatus)['divorced'] +
  table(fcc_data$MaritalStatus)['separated'])
names(no_spouse) = c("no spouse")
no_spouse / sum(table(fcc_data$MaritalStatus))
```

#### <span style="color:#377bb5">47% consider themselves underemployed (working a job that is below their education level).</span>

```{r echo=FALSE, message=FALSE, IsUnderEmployed}
# IsUnderEmployed
is_under_emp <- table(fcc_data$IsUnderEmployed)['1']
names(is_under_emp) = c("is underemployed")
is_under_emp / sum(table(fcc_data$IsUnderEmployed))
```

#### <span style="color:#377bb5">If they have a home mortgage, they owe an average of $194k.</span>

```{r echo=FALSE, message=FALSE, HomeMortgageOwe}
# HomeMortgageOwe
summary(fcc_data$HomeMortgageOwe, na.rm = TRUE)
home_mort_owe.grob <- plot_title("About how much do you owe on your home mortgage in USD?")
home_mort_owe_na_rm <- with(fcc_data, fcc_data[!is.na(HomeMortgageOwe), ])
g_home_mort_owe <- grid.arrange(nice_histogram(home_mort_owe_na_rm$HomeMortgageOwe, 100000, "HomeMortgageOwe"), top = home_mort_owe.grob)
```

#### <span style="color:#377bb5">If they have student loans, they owe an average of $37k.</span>

```{r echo=FALSE, message=FALSE, StudentDebtOwe_1}
# StudentDebtOwe
summary(fcc_data$StudentDebtOwe, na.rm = TRUE)
stud_debt_owe.grob <- plot_title("About how much do you owe in student debt loans in USD?")
stud_debt_owe_na_rm <- with(fcc_data, fcc_data[!is.na(StudentDebtOwe), ])
g_stud_debt_owe <- grid.arrange(nice_histogram(stud_debt_owe_na_rm$StudentDebtOwe, 10000, "StudentDebtOwe"), top = stud_debt_owe.grob)
```

Removing the million dollar outlier, the distribution is much more clear with the majority of debt under $75k. I hope that outlier is a joke.

```{r echo=FALSE, message=FALSE, StudentDebtOwe_2}
# StudentDebtOwe without 1 million outlier (joke?)
stud_debt_owe.grob <- plot_title("About how much do you owe in student debt loans in USD?")
stud_debt_owe_na_rm <- with(fcc_data, fcc_data[!is.na(StudentDebtOwe) & StudentDebtOwe < 1000000, ])
g_stud_debt_owe <- grid.arrange(nice_histogram(stud_debt_owe_na_rm$StudentDebtOwe, 10000, "StudentDebtOwe"), top = stud_debt_owe.grob)
```

#### <span style="color:#377bb5">14% don’t yet have high speed internet at home.</span>

```{r echo=FALSE, message=FALSE, HasHighSpdInternet}
# HasHighSpdInternet
has_hs_int <- table(fcc_data$HasHighSpdInternet)['1']
names(has_hs_int) = c("has high speed internet")
has_hs_int / sum(table(fcc_data$HasHighSpdInternet))
```

#### <span style="color:#377bb5">And 3% are currently receiving disability benefits from their government.</span>

```{r echo=FALSE, message=FALSE, IsReceiveDiabilitiesBenefits}
# IsReceiveDiabilitiesBenefits
disability_bfts <- table(fcc_data$IsReceiveDiabilitiesBenefits)['1']
names(disability_bfts) = c("is receiving disability benefits")
disability_bfts / sum(table(fcc_data$IsReceiveDiabilitiesBenefits))
```

These are the people who are learning data science and engineering. It is clear that free, self-paced learning resources are important.

## Univariate Analysis

#### What is/are the main feature(s) of interest in your dataset?

There isn't really a singular main feature of interest in the "2016 New Coder Survey" dataset. There are several smaller features, but nothing stands out like diamond price and its relationship to carat weight, cut, colour, etc. in the [R diamonds dataset](http://docs.ggplot2.org/0.9.3.1/diamonds.html), for example. The diamonds dataset covers two time periods - the existence of the diamond pre-sale and post-sale, whereas the survey dataset only covers a single period - the early stages of an individual's coding care.

If we could fast-forward several years and survey the same respondents, the main feature of interest might be career earnings (adjusted for cost of living, preferably) and/or self-reported career satisfaction. A predictive model using a combination of variables from the 2016 survey could then be built to estimate career success.

If the survey asked "*Are you already working as a data scientist/engineer?*" instead of "*Are you already working as a software developer?*", that variable might also be a main feature of interest. Unfortunately, the answer to that question cannot be extracted from the existing variables.

#### What other features in the dataset do you think will help support your investigation into your feature(s) of interest?

Though there isn't a main feature of interest, I will explore one smaller feature of interest: what drives an individual's earning expectations. For respondents pursuing data science and engineering, I wonder how salary expectations vary based on:

- age
- location
- gender
- level of education
- school major
- if they consider themselves underemployed
- current salary
- current industry
- programming experience
- how many hours they dedicate to learning per week

#### Of the features you investigated, were there any unusual distributions?

There was a lot of long tail data. Most did not require transformation to view the details of the distribution. Programming experience was *really* positively skewed, however, and required log transformation to visually compare those with 3 months experience to those with 25 years.

#### Did you perform any operations on the data to tidy, adjust, or change the form of the data? If so, why did you do this?

The following operations were performed to tidy, adjust, or change the form of the data:

- Each code event, resource, and podcast is represented by a boolean variable. I summed the number of yeses for event event/resource/podcast, which created a single row of sums. I used [tidyr](https://github.com/hadley/tidyr)'s ```gather()``` to transform the data from a wide format to a long format. Then I transformed the long data into factor format, using the replicate function with the number of yeses as the multiplier. This data is used to create each category's bar chart. ![wide to long to factor formats](http://i.imgur.com/ICL9lkQ.png)
- After subselecting all code event, resource, and podcast columns separately, I created a new boolean variable named *answered*, where 1 represents using at least one event/resource/podcast and 0 represents using none. The *answered* sum total for each of the three categories is used in the "*x out of 646 developing data scientists/engineers answered*" label at the bottom of the bar charts above. ![label](http://i.imgur.com/j04JNl5.png)
- I separated data science/engineering-related podcasts in the user-inputted PodcastOther category into their own boolean variables.
- I changed "NA" in the EmploymentStatus variable to "other" if the respondent provided the user-inputted EmploymentStatusOther variable.
- I changed "NA" in the EmploymentField variable to "other" if the respondent provided the user-inputted EmploymentFieldOther variable.
- I separated the “Americas” continents outputted by [countrycode()](https://github.com/vincentarelbundock/countrycode) into North and South America.

The first five operations were performed so bar charts could be created, which wasn't possible with the original data format. The "Americas" separation was performed for additional insight.

## Bivariate Plots Section
```{r echo=FALSE, message=FALSE, Bivariate_Plots}
# note univariate where things differ from new coder survey
# put na_rm in geom_bar/hist functions?

#- age
#- location
#- gender
#- level of education
#- school major
#- if they consider themselves underemployed
#- current salary
#- current industry
#- programming experience
#- how many hours they dedicate to learning per week

age_income.grob <- plot_title("What is your current salary in USD?\nHow old are you?")
g_age_income <- grid.arrange(nice_scatter(fcc_data$Age, fcc_data$Income, "Age", "Income"), top = age_income.grob)

age_exp_earn.grob <- plot_title("About how much do you expect to earn per year at your first new job (in USD)?\nHow old are you?")
g_age_income <- grid.arrange(nice_scatter(fcc_data$Age, fcc_data$ExpectedEarning, "Age", "ExpectedEarning"), top = age_exp_earn.grob)

with(fcc_data, cor.test(Age, ExpectedEarning, method = 'pearson'))
```

## Bivariate Analysis

#### Talk about some of the relationships you observed in this part of the investigation. How did the feature(s) of interest vary with other features in the dataset?

#### Did you observe any interesting relationships between the other features (not the main feature(s) of interest)?

#### What was the strongest relationship you found?




## Multivariate Plots Section

```{r echo=FALSE, Multivariate_Plots}

```

## Multivariate Analysis

#### Talk about some of the relationships you observed in this part of the investigation. Were there features that strengthened each other in terms of looking at your feature(s) of interest?

#### Were there any interesting or surprising interactions between features?

#### OPTIONAL: Did you create any models with your dataset? Discuss the strengths and limitations of your model.

------

## Final Plots and Summary

#### Plot One
```{r echo=FALSE, Plot_One}

```

#### Description One


#### Plot Two
```{r echo=FALSE, Plot_Two}

```

#### Description Two


#### Plot Three
```{r echo=FALSE, Plot_Three}

```

#### Description Three

------

## Reflection
